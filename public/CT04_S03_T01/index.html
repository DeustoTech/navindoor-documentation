<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  

  
  <title>T01 Extended Kalman Filter to traj class | Navindoor MATLAB Toolbox</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Utilizaremos el filtro de Kalman ya implementado en MATLAB, por el Control System Toolbox. En ete caso, veremos como se puede utilizar esta herramienta en nuestro caso concreto Cargamos un objetos nec">
<meta property="og:type" content="article">
<meta property="og:title" content="T01 Extended Kalman Filter to traj class">
<meta property="og:url" content="http://yoursite.com/CT04_S03_T01/index.html">
<meta property="og:site_name" content="Navindoor MATLAB Toolbox">
<meta property="og:description" content="Utilizaremos el filtro de Kalman ya implementado en MATLAB, por el Control System Toolbox. En ete caso, veremos como se puede utilizar esta herramienta en nuestro caso concreto Cargamos un objetos nec">
<meta property="og:locale" content="es">
<meta property="og:updated_time" content="2018-05-10T12:51:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="T01 Extended Kalman Filter to traj class">
<meta name="twitter:description" content="Utilizaremos el filtro de Kalman ya implementado en MATLAB, por el Control System Toolbox. En ete caso, veremos como se puede utilizar esta herramienta en nuestro caso concreto Cargamos un objetos nec">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Navindoor MATLAB Toolbox</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="https://github.com/joroya/navindoor">GitHub</a>
        
          <a class="main-nav-link" href="https://github.com/joroya/navindoor/archive/master.zip">Download</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Buscar"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-CT04_Signals_Processing/S03_Unscented_Kalman_Filter/T01_Extended_Kalman_Filter_to_traj_class" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/CT04_S03_T01/" class="article-date">
  <time datetime="2018-05-10T12:51:25.000Z" itemprop="datePublished">2018-05-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CT04-Signals-Processing/">CT04 Signals Processing</a>►<a class="article-category-link" href="/categories/CT04-Signals-Processing/S03-Unscented-Kalman-Filter/">S03 Unscented Kalman Filter</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      T01 Extended Kalman Filter to traj class
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>Utilizaremos el filtro de Kalman ya implementado en MATLAB, por el <em>Control System Toolbox</em>. En ete caso, veremos como se puede utilizar esta herramienta en nuestro caso concreto</p>
<p>Cargamos un objetos necesarios para la realizaci&oacute;n del ejercicio</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">clear<span class="token punctuation">;</span>
<span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'data/signals/SgnsBBS_filter_by_RSS'</span><span class="token punctuation">)</span>
<span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'data/levels/EI_UD_conn_AP_fakes.mat'</span><span class="token punctuation">)</span>
<span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'data/trajs/straj_in_conn_AP_fakes.mat'</span><span class="token punctuation">)</span>
whos
%
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>Warning: While loading an object of class &#39;BeaconBasedSgn&#39;:
Invalid default value for property &#39;BeaconBasedSgnLevels&#39; in class
&#39;BeaconBasedSgn&#39;:
Undefined variable &quot;BBSLevel&quot; or class &quot;BBSLevel.empty&quot;. 
Warning: While loading an object of class &#39;BeaconBasedSgn&#39;:
Invalid default value for property &#39;BeaconBasedSgnLevels&#39; in class
&#39;BeaconBasedSgn&#39;:
Undefined variable &quot;BBSLevel&quot; or class &quot;BBSLevel.empty&quot;. 
Warning: While loading an object of class &#39;BeaconBasedSgn&#39;:
Invalid default value for property &#39;BeaconBasedSgnLevels&#39; in class
&#39;BeaconBasedSgn&#39;:
Undefined variable &quot;BBSLevel&quot; or class &quot;BBSLevel.empty&quot;. 
  Name          Size              Bytes  Class             Attributes

  building      1x1             1728061  build                       
  iBBS          1x3                   0  BeaconBasedSgn              
  straj         1x1              142628  supertraj                   


</code></pre><p>Seleccionamos el primer tramo de se&ntilde;al.</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">index_traj <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
itraj  <span class="token operator">=</span> straj<span class="token punctuation">.</span><span class="token function">trajs</span><span class="token punctuation">(</span>index_traj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>Selecionamos la se&ntilde;al RSS generada por esa trayectoria, utilizamos los el indice de trayectoria.</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">index_RSS_sgn <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
iBBSL_RSS <span class="token operator">=</span> <span class="token function">iBBS</span><span class="token punctuation">(</span>index_RSS_sgn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">BBSLevels</span><span class="token punctuation">(</span>index_traj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<pre><code>No appropriate method, property, or field &#39;BBSLevels&#39; for class &#39;BeaconBasedSgn&#39;.

Error in tpa3d91ec3_f6ea_498a_84bc_06cce1386a25 (line 24)
iBBSL_RSS = iBBS(index_RSS_sgn).BBSLevels(index_traj);

</code></pre><p>Por &uacute;ltimo recogemos el nivel donde transcurre esa trayectoria, utilizamos la propiedad level de itraj</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">ilevel <span class="token operator">=</span> building<span class="token punctuation">.</span><span class="token function">levels</span><span class="token punctuation">(</span>itraj<span class="token punctuation">.</span>level <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-matlab"><code class="language-matlab"><span class="token function">clear</span><span class="token punctuation">(</span><span class="token string">'building'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token string">'straj'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token string">'iBBS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token string">'index*'</span><span class="token punctuation">)</span>
whos
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="Filtro-de-Kalman"><a href="#Filtro-de-Kalman" class="headerlink" title="Filtro de Kalman"></a>Filtro de Kalman</h2><p>Es un m&eacute;todo de predicci&oacute;n de medidas, en el que se utiliza el conocimiento del comportamiento que puede serguir nuestro sistema (modelo din&aacute;mico) y una serie de medidas que nos permiten estimar alguna variables del sistema.</p>
<p>Suponiendo que <code>x</code> es la variable que queramos predecir, e <code>y</code> es un vector de medidas, las ecuaci&oacute;n para hallar el siguiente valor es el siguiente. variable</p>
<p>$$<br>x[k] = f(x[k-1],w[k-1] ,u_s[k-1])<br>y[k] = h(x[k], v[k] ,u_m[k])<br>$$</p>
<p>En nuestro caso, la funci&oacute;n f, es StateTransition_EKF</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">type StateTransition_EKF<span class="token punctuation">.</span>m
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>mientras que la funci&oacute;n h, es  Measurement_EKF</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">type Measurement_EKF<span class="token punctuation">.</span>m
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="Condiciones-iniciales"><a href="#Condiciones-iniciales" class="headerlink" title="Condiciones iniciales"></a>Condiciones iniciales</h2><p>Tomamos el vector de estado que nos proporciona la trayectoria .</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">x0 <span class="token operator">=</span> itraj<span class="token punctuation">.</span><span class="token function">nodes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">r</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
y0 <span class="token operator">=</span> itraj<span class="token punctuation">.</span><span class="token function">nodes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">r</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
v0 <span class="token operator">=</span> itraj<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
v0x <span class="token operator">=</span> v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>itraj<span class="token punctuation">.</span><span class="token function">angles</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
v0y <span class="token operator">=</span> v0<span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span>itraj<span class="token punctuation">.</span><span class="token function">angles</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

initialStateGuess <span class="token operator">=</span> <span class="token punctuation">[</span>x0 y0 v0x v0y<span class="token punctuation">]</span><span class="token operator">'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Constructor-del-Filtro-de-Kalman"><a href="#Constructor-del-Filtro-de-Kalman" class="headerlink" title="Constructor del Filtro de Kalman"></a>Constructor del Filtro de Kalman</h2><pre class="line-numbers language-matlab"><code class="language-matlab">ExtendedKF <span class="token operator">=</span> <span class="token function">extendedKalmanFilter</span><span class="token punctuation">(</span><span class="token operator">@</span>StateTransition_EKF<span class="token punctuation">,</span><span class="token operator">@</span>Measurement_EKF<span class="token punctuation">,</span>initialStateGuess<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="Covarianzas-del-de-las-medidas-y-del-modelo"><a href="#Covarianzas-del-de-las-medidas-y-del-modelo" class="headerlink" title="Covarianzas del de las  medidas y del modelo"></a>Covarianzas del de las  medidas y del modelo</h2><pre class="line-numbers language-matlab"><code class="language-matlab">sigma_m <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% desviacion estandar de medicion de attenuacion</span>
sigma_d <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% desviacion estandar del modelo</span>
sigma_mv <span class="token operator">=</span> <span class="token number">5.0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% desviacion estandar de medicion de velocidad</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Agregamos estas desviaciones, creaando una matriz de covariancias</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">dt <span class="token operator">=</span> iBBSL_RSS<span class="token punctuation">.</span>dt<span class="token punctuation">;</span>
total_beacon <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>iBBSL_RSS<span class="token punctuation">.</span>beacons<span class="token punctuation">)</span><span class="token punctuation">;</span>
ExtendedKF<span class="token punctuation">.</span>MeasurementNoise <span class="token operator">=</span> <span class="token function">diag</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">repmat</span><span class="token punctuation">(</span>sigma_m<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>total_beacon<span class="token punctuation">)</span> sigma_mv<span class="token operator">^</span><span class="token number">2</span> sigma_mv<span class="token operator">^</span><span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ExtendedKF<span class="token punctuation">.</span>MeasurementNoise
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-matlab"><code class="language-matlab">ExtendedKF<span class="token punctuation">.</span>ProcessNoise <span class="token operator">=</span> <span class="token function">diag</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span>dt<span class="token operator">^</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">4</span> <span class="token punctuation">,</span> dt<span class="token operator">^</span><span class="token number">4</span><span class="token operator">/</span><span class="token number">4</span>  <span class="token punctuation">,</span> dt<span class="token operator">^</span><span class="token number">2</span>  <span class="token punctuation">,</span>  dt<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">*</span>sigma_d<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ExtendedKF<span class="token punctuation">.</span>ProcessNoise
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<pre class="line-numbers language-matlab"><code class="language-matlab">estimation <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>iBBSL_RSS<span class="token punctuation">.</span>len<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>% <strong>M&eacute;todo de ejecuci&oacute;n</strong></p>
<pre class="line-numbers language-matlab"><code class="language-matlab">tf <span class="token operator">=</span> itraj<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ti <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
time_line <span class="token operator">=</span>ti<span class="token operator">:</span>dt<span class="token operator">:</span>tf<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Posici&oacute;n de los  <em>beacons</em></p>
<pre class="line-numbers language-matlab"><code class="language-matlab">u <span class="token operator">=</span> <span class="token function">vec2mat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>iBBSL_RSS<span class="token punctuation">.</span>beacons<span class="token punctuation">.</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">% En este caso estas posiciones no se modifican</span>
iter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> t <span class="token operator">=</span> time_line
    iter <span class="token operator">=</span> iter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">% Predict</span>
    <span class="token comment" spellcheck="true">% ==================</span>
    <span class="token comment" spellcheck="true">% Predecimos el valor de la posici&amp;oacute;n segun el modelo dinamico</span>
    <span class="token function">predict</span><span class="token punctuation">(</span>ExtendedKF<span class="token punctuation">,</span>dt<span class="token punctuation">)</span>

    <span class="token comment" spellcheck="true">% RSS values</span>
    <span class="token comment" spellcheck="true">% ==================</span>
    result <span class="token operator">=</span> <span class="token function">step</span><span class="token punctuation">(</span>iBBSL_RSS<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    values <span class="token operator">=</span> result<span class="token punctuation">.</span>values<span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">% en este caso no hace falta recoger result.beacons</span>
    <span class="token comment" spellcheck="true">% ya que los beacons siempre son los mismo, ya que iBBSL_RSS</span>
    <span class="token comment" spellcheck="true">% no ha sio filtrado. Comprobar que iBBSL_RSS.NumMaxAps == 0</span>
    %
    <span class="token comment" spellcheck="true">% velocity values</span>
    <span class="token comment" spellcheck="true">% ==================</span>
    index_node <span class="token operator">=</span> <span class="token function">time2index</span><span class="token punctuation">(</span>itraj<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    v <span class="token operator">=</span> itraj<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>index_node<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">normrnd</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>sigma_mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    vx <span class="token operator">=</span> v<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>itraj<span class="token punctuation">.</span><span class="token function">angles</span><span class="token punctuation">(</span>index_node<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vy <span class="token operator">=</span> v<span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span>itraj<span class="token punctuation">.</span><span class="token function">angles</span><span class="token punctuation">(</span>index_node<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    %
    <span class="token comment" spellcheck="true">% create measurement</span>
    <span class="token comment" spellcheck="true">% ==================</span>
    z <span class="token operator">=</span> <span class="token punctuation">[</span>values vx vy<span class="token punctuation">]</span><span class="token operator">'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% z debe se contravariante</span>

    <span class="token function">correct</span><span class="token punctuation">(</span>ExtendedKF<span class="token punctuation">,</span>z<span class="token punctuation">,</span>u<span class="token punctuation">)</span>
    <span class="token function">estimation</span><span class="token punctuation">(</span>iter<span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span> <span class="token operator">=</span> ExtendedKF<span class="token punctuation">.</span>State<span class="token operator">'</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
%
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-matlab"><code class="language-matlab"> clf
<span class="token function">plot</span><span class="token punctuation">(</span>itraj<span class="token punctuation">)</span>
hold
<span class="token function">plot</span><span class="token punctuation">(</span>ilevel<span class="token punctuation">)</span>
<span class="token function">line</span><span class="token punctuation">(</span><span class="token function">estimation</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">estimation</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'Marker'</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">,</span><span class="token string">'Color'</span><span class="token punctuation">,</span><span class="token string">'red'</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-matlab"><code class="language-matlab">itraj_estimation <span class="token operator">=</span> <span class="token function">mat2traj</span><span class="token punctuation">(</span><span class="token function">estimation</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
itraj_estimation<span class="token punctuation">.</span>t <span class="token operator">=</span> itraj<span class="token punctuation">.</span>t<span class="token punctuation">;</span>
itraj_estimation<span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token function">estimation</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token function">estimation</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
itraj_estimation<span class="token punctuation">.</span>label <span class="token operator">=</span> <span class="token string">'Estimation'</span><span class="token punctuation">;</span>

itraj<span class="token punctuation">.</span>label <span class="token operator">=</span> <span class="token string">'Real'</span><span class="token punctuation">;</span>
%
<span class="token comment" spellcheck="true">% %% comparetraj([itraj_estimation itraj]) &amp;amp; console</span>
<span class="token comment" spellcheck="true">% %%</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><sub><a href="&quot;http://www.mathworks.com/products/matlab/&quot;">Published with MATLAB R2017b</a></sub></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/CT04_S03_T01/" data-id="cjh7k5e3n001d5as4jwc4ws4j" class="article-share-link">Compartir</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/CT04_S03_T02/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nuevo</strong>
      <div class="article-nav-title">
        
          T02 Extended Kalman Filter to supertraj class
        
      </div>
    </a>
  
  
    <a href="/CT04_S02_T02/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Viejo</strong>
      <div class="article-nav-title">T02 Extended Kalman Filter to supertraj class</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorías</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CT01-Planimetry/">CT01 Planimetry</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CT01-Planimetry/S01-Examples/">S01 Examples</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT01-Planimetry/S02-node-Class/">S02 node Class</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT01-Planimetry/S03-wall-Class/">S03 wall Class</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT01-Planimetry/S04-level-Class/">S04 level Class</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT01-Planimetry/S05-build-Class/">S05 build Class</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT02-Trayectories-Simulation/">CT02 Trayectories Simulation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CT02-Trayectories-Simulation/S01-Examples/">S01 Examples</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT02-Trayectories-Simulation/S02-traj-class/">S02 traj class</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT02-Trayectories-Simulation/S03-supertraj-class/">S03 supertraj class</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT02-Trayectories-Simulation/S05-network-class/">S05 network class</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT03-Signals-Simulation/">CT03 Signals Simulation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CT03-Signals-Simulation/S01-Examples/">S01 Examples</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT03-Signals-Simulation/S02-BeaconBasedSgnLevel/">S02 BeaconBasedSgnLevel</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT03-Signals-Simulation/S03-BeaconFreeSgnLevel/">S03 BeaconFreeSgnLevel</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT03-Signals-Simulation/S04-BeaconBasedSgn/">S04 BeaconBasedSgn</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT03-Signals-Simulation/S05-BeaconFreeSgn/">S05 BeaconFreeSgn</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT04-Signals-Processing/">CT04 Signals Processing</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CT04-Signals-Processing/S01-Examples/">S01 Examples</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT04-Signals-Processing/S02-Extended-Kalman-Filter/">S02 Extended Kalman Filter</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT04-Signals-Processing/S03-Unscented-Kalman-Filter/">S03 Unscented Kalman Filter</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CT05-Methods-Comparison/">CT05 Methods Comparison</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CT05-Methods-Comparison/S01-Examples/">S01 Examples</a></li></ul></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Jesus Oroya<br>
      Construido por <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="https://github.com/joroya/navindoor" class="mobile-nav-link">GitHub</a>
  
    <a href="https://github.com/joroya/navindoor/archive/master.zip" class="mobile-nav-link">Download</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>